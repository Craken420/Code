[SerieLoteMov.frm/Forma]
ExpresionesAlCerrar=Asigna(Temp.texto, nulo)<BR>Asigna(Temp.Texto, ListaBuscarDuplicados(CampoEnLista(SerieLoteMov:SerieLoteMov.Propiedades)))<BR>Si(ConDatos(Temp.Texto), Si(Error(<T>Propiedad <T>Temp.Texto+<T> Duplicada<T>,BotonAceptar)=BotonAceptar, AbortarOperacion, AbortarOperacion))<BR>Asigna(Temp.Texto, <T>B<T>)<BR>Si(Info.EsEntrada, Asigna(Temp.Texto, SQL(<T>EXEC spValidarPropiedadesEnSeriesMAVI :tEmpresa, :tModulo, :nID, :nReng, :tArt<T>, Empresa, Info.Modulo, Info.ID, Info.RenglonID, Info.Articulo)),Info.EsEntrada)<BR>Si(Temp.Texto <> <T>B<T>, Si(Error(Temp.Texto,BotonAceptar)=BotonAceptar, AbortarOperacion, AbortarOperacion), Asigna(Temp.Texto, nulo))<BR>Asigna(Info.LotesFijos, Falso)<BR>Asigna(Filtro.Espacio, Nulo)
ExpresionesAlMostrar=Asigna(Info.Propiedades, Nulo)<BR>Asigna(Info.LotesFijos, SQL(<T>spSugerirSerieLoteMov :tEmpresa, :tModulo, :nID, :tMovTipo, :tAlm, :nRenglonID, :tArt, :tSub, :nSuc, :nCantidad, :nPaquete<T>, Empresa, Info.Modulo, Info.ID, Info.MovTipo, Info.Almacen, Info.RenglonID, Info.Articulo, Info.SubCuenta, Sucursal, Info.Cantidad, Info.Paquete))<BR>Si<BR>(Info.Modulo=<T>VTAS<T>) Y (SQL(<T>SELECT Linea FROM ART WHERE Articulo=<T>+Comillas(Info.Articulo))=<T>MOTOCICLETAS<T>) Y (medio(Usuario,1,5)=<T>VENTP<T>)<BR>Entonces<BR>  Asigna(Mavi.DM0271Bandera,<T>VERDADERO<T>)<BR>Fin

[SerieLoteMov.frm/Acciones.Aceptar]
AntesExpresiones=Asigna(Info.SumaSerieLote, Suma(SerieLoteMov:SerieLoteMov.Cantidad))<BR>Asigna(Info.SumaAlternaSerieLote, Suma(SerieLoteMov:SerieLoteMov.CantidadAlterna))<BR> //IDENTIFICA SI CONTIENE UNA MOTO<BR>si SQL(<T>exec dbo.SP_DM0283ValidaCandadoMoto :tlote,:ndev<T>, SerieLoteMov:SerieLoteMov.SerieLote,info.id)=0 y (Info.Mov=<T>Devolucion Venta<T>)<BR>entonces<BR>       informacion(<T>Los datos no corresponden a los de la factura<T>)<BR>       abortaroperacion<BR> fin<BR><BR>Si Mavi.DM0271Bandera=<T>VERDADERO<T><BR>Entonces<BR> Forma(<T>DM0271CandadoFacturacionMotoFrm<T>)<BR> AbortarOperacion<BR>Fin
